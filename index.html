<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CAFE DURGA â€” Menu</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Font Awesome (icons) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
  <!-- Inter font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700;900&display=swap" rel="stylesheet" />

  <style>
    :root{
      --primary-teal: #14b8a6;
      --accent-yellow: #facc15;
      --bg-soft: #f7ffff;
      --muted: #6b7280;
      --card-shadow: 0 8px 30px rgba(20,184,166,0.08);
    }

    /* ENHANCEMENT: Smoother font stack and scroll behavior */
    html{scroll-behavior:smooth}
    body{font-family:'Inter',system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;padding-top:0;background:linear-gradient(180deg,var(--bg-soft),#ffffff 40%);color:#0f172a;}

    /* header gradient */
    .brand-gradient{
      background: linear-gradient(90deg, rgba(20,184,166,1) 0%, rgba(34,197,94,0.95) 40%, rgba(250,193,24,1) 100%);
      color:white;
    }

    /* small card shadow & hover pop */
    .menu-card{box-shadow:var(--card-shadow);transition:transform .22s ease, box-shadow .22s ease; border-radius: 1rem;}
    .menu-card:hover{transform:translateY(-6px); box-shadow:0 18px 40px rgba(2,6,23,0.10);}

    /* menu item layout */
    .menu-item-row{display:flex;align-items:flex-start;justify-content:space-between;padding:.85rem 0;border-bottom:1px dashed rgba(15,23,42,0.06)}
    .menu-item-name{font-weight:700;color:#0f172a}
    .price-badge{font-weight:800;color:var(--accent-yellow);min-width:5rem;text-align:right;font-style:italic}

    /* section title */
    .section-title{color:#0f172a;font-size:1.9rem;font-weight:800;display:inline-block;border-bottom:4px solid var(--primary-teal);padding-bottom:.35rem}

    /* nav active underline */
    .nav-link { position:relative }
    .nav-link::after{ content:""; position:absolute; left:0; bottom:-6px; width:100%; height:3px; background:var(--accent-yellow); transform:scaleX(0); transform-origin:left; transition:transform .28s ease;}
    .nav-link:hover::after, .nav-link.active::after{ transform:scaleX(1); }

    /* floating order button - Now fixed, but visibility controlled by JS */
    .float-order{
        position:fixed;
        right:20px;
        bottom:30px;
        z-index:90;
        opacity: 1; /* Default visible */
        transition: opacity 0.3s ease;
    }

    /* Class added by JS to hide the buttons when near the footer */
    .float-order.hidden-at-bottom {
        opacity: 0;
        pointer-events: none; /* Disable interaction when hidden */
    }

    /* accessibility focus */
    a:focus, button:focus { outline:3px solid rgba(20,184,166,0.18); outline-offset:3px; }

    /* subtle entrance */
    @keyframes fadeUp { from { opacity:0; transform:translateY(10px)} to {opacity:1; transform:none} }
    .reveal { animation: fadeUp .48s ease both; }


    /* =========================================================
     * LOOPING IMAGE SLIDER STYLES (MODIFIED FOR JS CONTROL)
     * ========================================================= */
    .slider-container {
        overflow: hidden;
        padding-left: 1rem;
        padding-right: 1rem;
        margin-left: -1rem;
        margin-right: -1rem;
        cursor: grab; /* Indicate draggable */
    }
    .slider-container.grabbing {
        cursor: grabbing;
    }

    .slider-track {
        display: flex;
        padding: 10px;
        width: 200%; /* Double the width to hold the duplicated content for seamless loop */
        /* CSS animation removed, now controlled by JS requestAnimationFrame */
        will-change: transform; /* Performance hint for smooth dragging/animation */
    }

    /* Define item size relative to the container */
    .gallery-item {
      /* Show 2.5 items on mobile, 3.5 on small screens, 4.75 on medium/desktop */
      width: 40%; 
      min-width: 40%;
      margin-right: 1rem; 
      aspect-ratio: 16/12;
      border-radius: 0.75rem;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      transition: transform 0.3s ease;
      /* Prevent image dragging in the browser while using our custom drag */
      user-select: none;
      -webkit-user-select: none;
    }

    .gallery-item:hover {
        transform: scale(1.03);
    }

    .gallery-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        pointer-events: none; /* Crucial for allowing drag on the image element */
    }

    /* Responsive adjustments for slider visibility */
    @media (min-width: 640px) {
        .gallery-item {
            width: 28.57%; 
            min-width: 28.57%;
        }
    }

    @media (min-width: 768px) {
        .gallery-item {
            width: 21.05%; 
            min-width: 21.05%;
        }
    }
    /* =========================================================
     * END SLIDER STYLES
     * ========================================================= */

    @media (max-width:640px){
      .section-title{font-size:1.4rem}
      .menu-item-name{font-size:.98rem}
      .price-badge{font-size:.98rem}
    }

    /* print friendly - hide interactive elements when printing */
    @media print{
      nav, .float-order, .search-bar, .socials-mobile, .gallery { display:none !important; }
      body { background: white; }
      .section-title { border-bottom-color: #0f172a; }
    }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header class="brand-gradient sticky top-0 z-50">
    <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
      <div class="flex items-center gap-4">
        <div class="rounded-lg p-2 bg-white/10">
          <svg width="44" height="44" viewBox="0 0 24 24" fill="none" class="text-white" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0z" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round" opacity="0.95"></path>
            <path d="M8 12h8M10 8h4M10 16h4" stroke="white" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round"></path>
          </svg>
        </div>
        <div>
          <h1 class="text-white text-2xl md:text-3xl font-extrabold tracking-wider uppercase" style="letter-spacing:.12em">CAFE DURGA</h1>
          <p class="text-white/90 text-xs md:text-sm">Pillene Branch â€” Goa</p>
        </div>
      </div>

      <div class="hidden md:flex items-center gap-4">
        <nav aria-label="Primary" class="flex gap-4 text-sm font-medium">
          <a href="#beverages" class="nav-link text-white/95 px-2">Beverages</a>
          <a href="#shakes" class="nav-link text-white/95 px-2">Shakes</a>
          <a href="#special" class="nav-link text-white/95 px-2">Breakfast</a>
          <a href="#pav-bhaji-section" class="nav-link text-white/95 px-2">Pav Bhaji</a>
          <a href="#mains" class="nav-link text-white/95 px-2">Mains</a>
        </nav>

        <div class="flex items-center gap-3">
          <a href="https://www.instagram.com/cafedurga.goa" aria-label="Instagram" class="text-white/90 hover:scale-105 transform">
            <i class="fab fa-instagram"></i>
          </a>
          <a href="https://share.google/UUDs8GZKXrpYLVIPq" aria-label="Google Business" class="text-white/90 hover:scale-105 transform">
            <i class="fab fa-google"></i>
          </a>
        </div>
      </div>

      <!-- mobile socials -->
      <div class="md:hidden flex items-center gap-3 socials-mobile pr-1">
        <a href="https://www.instagram.com/cafedurga.goa" class="text-white">
          <i class="fab fa-instagram"></i>
        </a>
        <button class="text-white js-open-nav" aria-expanded="false" aria-controls="mobile-nav">
          <i class="fa fa-bars"></i>
        </button>
      </div>
    </div>

    <!-- mobile nav -->
    <div id="mobile-nav" class="md:hidden bg-white/5 border-t border-white/10 hidden">
      <div class="max-w-6xl mx-auto px-4 py-2 overflow-x-auto">
        <div class="inline-flex gap-3 whitespace-nowrap">
          <a href="#beverages" class="text-white text-sm px-3 py-1 rounded-full bg-white/6">Drinks</a>
          <a href="#shakes" class="text-white text-sm px-3 py-1 rounded-full bg-white/6">Shakes</a>
          <a href="#special" class="text-white text-sm px-3 py-1 rounded-full bg-white/6">Breakfast</a>
          <a href="#pav-bhaji-section" class="text-white text-sm px-3 py-1 rounded-full bg-white/6">Pav Bhaji</a>
          <a href="#mains" class="text-white text-sm px-3 py-1 rounded-full bg-white/6">Mains</a>
        </div>
      </div>
    </div>
  </header>

  <!-- FLOATING ORDER / PRINT -->
  <div id="floatOrder" class="float-order">
    <div class="flex flex-col gap-3">
      <a href="tel:7741000209" class="inline-flex items-center gap-2 px-4 py-3 rounded-full bg-gradient-to-r from-emerald-500 to-teal-400 text-white shadow-lg transform hover:scale-105 transition" aria-label="Call to order">
        <i class="fa fa-phone-alt"></i> Order
      </a>
      <button id="printMenu" class="inline-flex items-center gap-2 px-4 py-3 rounded-full bg-white text-slate-800 shadow" title="Print or Download Menu">
        <i class="fa fa-file-pdf"></i> Download
      </button>
    </div>
  </div>

  <!-- MAIN -->
  <!-- We still keep a generous bottom padding for visual comfort -->
  <main class="max-w-6xl mx-auto px-4 pt-12 pb-20">

    <!-- Intro -->
    <section class="text-center mb-10 reveal">
      <h2 class="section-title mx-auto">THE MENU</h2>
      <p class="mt-4 text-muted text-sm text-gray-600 max-w-2xl mx-auto">Freshly prepared, honest portions â€” scroll or use search to find your favourite.</p>

      <!-- search -->
      <div class="mt-6 flex justify-center">
        <div class="w-full max-w-xl">
          <label for="menuSearch" class="sr-only">Search menu</label>
          <div class="relative">
            <input id="menuSearch" class="search-bar w-full rounded-xl border border-gray-200 py-3 pl-4 pr-12 shadow-sm" placeholder="Search items, e.g. 'Pasta' or 'Paneer'..." type="search" />
            <button id="clearSearch" title="Clear" class="absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hidden">
              <i class="fa fa-times"></i>
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- ENHANCEMENT: Looping Image Gallery Section with JS Drag/Swipe Control -->
    <section class="gallery mb-12 reveal" style="animation-delay: 200ms;">
        <h3 class="text-lg font-bold mb-4 text-center text-gray-700">FEATURED DISHES</h3>
        <div class="slider-container" id="sliderContainer">
            <!-- The track contains the original set of images and a duplicate set for seamless looping -->
            <div class="slider-track" id="sliderTrack">
                
                <!-- Original Set (Set 1) -->
                <div class="gallery-item">
                    <img class="gallery-image" src="./pav bhaji.png" alt="Image of Pav Bhaji" loading="lazy" />
                </div>
                <div class="gallery-item">
                    <img class="gallery-image" src="./dosa.png" alt="Image of Masala Dosa" loading="lazy" />
                </div>
                <div class="gallery-item">
                    <img class="gallery-image" src="./coffee.png" alt="Image of Cold Coffee" loading="lazy" />
                </div>
                <div class="gallery-item">
                    <img class="gallery-image" src="./meal.png" alt="Image of Paneer Thali" loading="lazy" />
                </div>

                <!-- Duplicate Set (Set 2) - This set is necessary for the continuous loop -->
                <div class="gallery-item">
                    <img class="gallery-image" src="../pav bhaji.png" alt="Image of Pav Bhaji" loading="lazy" />
                </div>
                <div class="gallery-item">
                    <img class="gallery-image" src="./dosa.png" alt="Image of Masala Dosa" loading="lazy" />
                </div>
                <div class="gallery-item">
                    <img class="gallery-image" src="./coffee.png" alt="Image of Cold Coffee" loading="lazy" />
                </div>
                <div class="gallery-item">
                    <img class="gallery-image" src="./meal.png" alt="Image of Paneer Thali" loading="lazy" />
                </div>
                
            </div>
        </div>
        <p class="text-xs text-center text-gray-500 mt-2">Images feature dishes from our main menu. Click and drag to scroll!</p>
    </section>

    <!-- Grid layout for major sections -->
    <section id="beverages" class="mb-8 reveal">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <div class="menu-card p-6 bg-white">
          <h3 class="text-lg font-bold mb-3">Beverages â€” Coffee & Hot Drinks</h3>
          <div id="beverages-list" aria-live="polite"></div>
        </div>
        <div class="menu-card p-6 bg-white flex flex-col items-center justify-center text-center text-gray-600">
          <svg width="84" height="84" viewBox="0 0 24 24" fill="none" class="mb-3" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M8 7v4a4 4 0 108 0V7" stroke="#14b8a6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            <path d="M3 12h18" stroke="#facc15" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round"></path>
          </svg>
          <p class="font-semibold">Freshly Brewed & Blended</p>
          <p class="text-sm mt-1">Single origin coffee, rich shakes & chilled teas.</p>
        </div>
      </div>
    </section>

    <section id="shakes" class="mb-8 reveal">
      <div class="menu-card p-6 bg-white">
        <h3 class="text-lg font-bold mb-3">Thick Shakes</h3>
        <div id="shakes-list"></div>
      </div>
    </section>

    <section id="special" class="mb-8 reveal">
      <h3 class="section-title">Breakfast & Specials</h3>
      <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="menu-card p-6 bg-white">
          <h4 class="font-semibold mb-3">Eggs & Morning</h4>
          <div id="cafe-special-list"></div>
        </div>
        <div class="menu-card p-6 bg-white">
          <h4 class="font-semibold mb-3">Breads & Spreads</h4>
          <div id="breads-spreads-list"></div>
        </div>
      </div>
    </section>

    <section id="snacks" class="mb-8 reveal">
      <h3 class="section-title">Snacks</h3>
      <div class="mt-6 grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- ENHANCEMENT: Image placeholder inside a section (Replaced image URL with placeholder) -->
        <div class="menu-card p-6 bg-white col-span-1">
            <img class="gallery-image w-full h-auto rounded-xl mb-4" src="./vaddda.png" alt="Image of Vada Pav" loading="lazy" />
            <h4 class="font-semibold mb-3">Quick Bites & Bhajjia</h4>
            <div id="snacks-list"></div>
        </div>
        <div class="menu-card p-6 bg-white col-span-2">
            <h4 class="font-semibold mb-3">Maggie & Savory Sides</h4>
            <!-- Split snacks-list content to fill the remaining 2/3 column -->
            <div id="maggie-list" class="mb-4"></div>
            <h4 class="font-semibold mb-3 border-t pt-4">Pakoda & Toast</h4>
            <div id="pakoda-list"></div>
        </div>
      </div>
    </section>

    <section id="south-indian" class="mb-8 reveal">
      <h3 class="section-title">South Indian & Parathas</h3>
      <div class="mt-6 grid grid-cols-1 lg:grid-cols-3 gap-6">
        <div class="lg:col-span-2 menu-card p-6 bg-white">
          <h4 class="font-semibold mb-3">Dosa, Idli & Uttappa</h4>
          <div id="south-indian-list"></div>
        </div>
        <div class="menu-card p-6 bg-white">
          <h4 class="font-semibold mb-3">Parathas</h4>
          <div id="parathas-list"></div>
        </div>
      </div>
    </section>

    <section id="sandwiches" class="mb-8 reveal">
      <h3 class="section-title">Grilled Sandwiches</h3>
      <div class="mt-6 menu-card p-6 bg-white">
        <div id="sandwiches-list"></div>
      </div>
    </section>

    <section id="pav-bhaji-section" class="mb-8 reveal">
      <h3 class="section-title">Pav Bhaji</h3>
      <div class="mt-6 menu-card p-6 bg-white max-w-2xl">
        <div id="pav-bhaji-list"></div>
      </div>
    </section>

    <section id="mains" class="mb-8 reveal">
      <h3 class="section-title">Main Course & Rice</h3>
      <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="menu-card p-6 bg-white">
          <h4 class="font-semibold mb-3">Main Course</h4>
          <div id="main-course-list"></div>
        </div>
        <div class="menu-card p-6 bg-white">
          <h4 class="font-semibold mb-3">Rice Meals</h4>
          <div id="rice-meals-list"></div>
        </div>
      </div>
    </section>

    <section id="pizza-section" class="mb-8 reveal">
      <h3 class="section-title">Pizza, Pasta & Fries</h3>
      <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="menu-card p-6 bg-white">
          <h4 class="font-semibold mb-3">Pizza</h4>
          <div id="pizza-list"></div>
        </div>
        <div class="menu-card p-6 bg-white">
          <h4 class="font-semibold mb-3">Pasta & Fries</h4>
          <div id="pasta-fries-list"></div>
        </div>
      </div>
    </section>

    <section id="chinese" class="mb-8 reveal">
      <h3 class="section-title">Chinese & Noodles</h3>
      <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="menu-card p-6 bg-white">
          <h4 class="font-semibold mb-3">Chinese Starters (Veg)</h4>
          <div id="chinese-veg-list"></div>
          <h4 class="font-semibold mb-3 mt-4 border-t border-dashed pt-4">Chinese Starters (Non-Veg)</h4>
          <div id="chinese-non-veg-list"></div>
        </div>
        <div class="menu-card p-6 bg-white">
          <h4 class="font-semibold mb-3">Fried Rice & Noodles (Veg)</h4>
          <div id="fried-rice-veg-list"></div>
          <h4 class="font-semibold mb-3 mt-4 border-t border-dashed pt-4">Fried Rice & Noodles (Non-Veg)</h4>
          <div id="fried-rice-non-veg-list"></div>
        </div>
      </div>

      <div class="mt-6 max-w-xl mx-auto menu-card p-6 bg-white">
        <h4 class="font-semibold mb-3">Extras</h4>
        <div id="extras-list"></div>
      </div>
    </section>

  </main>

  <!-- FOOTER -->
  <footer id="footer" class="bg-slate-900 text-white py-8">
    <div class="max-w-6xl mx-auto px-4 text-center">
      <p class="text-2xl font-bold mb-1" style="color:var(--accent-yellow)">CAFE DURGA</p>
      <p class="text-sm mb-3">Goa â€” Pillene Branch â€¢ <span class="font-semibold">ðŸ“ž 7741000209</span></p>
      <div class="flex justify-center gap-4 mb-3">
        <a href="https://www.instagram.com/cafedurga.goa" class="text-white/90">
          <i class="fab fa-instagram fa-2x"></i>
        </a>
        <a href="https://share.google/UUDs8GZKXrpYLVIPq" class="text-white/90">
          <i class="fab fa-google fa-2x"></i>
        </a>
      </div>
      <p class="text-xs opacity-80">&copy; 2025 Cafe Durga. All rights reserved.</p>
    </div>
  </footer>

  <!-- SCRIPT: Data + Render logic + Scroll Hiding Fix -->
  <script>
    /***** Data (cleaner arrays) *****/
    const menuData = {
      beverages: [
        ["Cold Coffee","150"],["Strong Cold Coffee","170"],["Cold Coffee With Crush","185"],
        ["Cold Coffee with Ice Cream","200"],["Cold Chocolate","140"],["Cold Bournvita","100"],
        ["Hot Bournvita","100"],["Americano","120"],["Hot Coffee","120"],["Cappuccino","140"],
        ["CafÃ© Latte","140"],["Hot Chocolate","140"],["Iced Americano","140"],["Lemon Ice Tea","140"],
        ["Peach Ice Tea","140"],["Fresh Lime Soda/ Water","100"],["Lemon Tea","100"],["Green Tea","100"],
        ["Black Tea","75"],["Tea","30"]
      ],
      thickShakes: [
        ["Ferrero Rocher Shake","250"],["Oreo Cookie Shake","220"],["KitKat Shake","220"],
        // Corrected spelling from 'Orero KitKat'
        ["Oreo KitKat Shake","250"],["Belgian Chocolate Shake","200"],
        // Corrected spelling from 'Vanilia Shake'
        ["Vanilla Shake","200"],["Banana Shake","200"],["Mango Shake","200"],["Strawberry Shake","200"],
        // Corrected spelling from 'Chickoo Shake'
        ["Chikoo Shake","200"]
      ],
      cafeDurgaSpecial: [
        ["Egg Omelette","150"],["Masala Omelette","180"],["Masala Cheese Omelette","200"],
        // Corrected format and spacing
        ["Mushroom & Herb Omelette","200"],["Egg White Omelette","200"],["Egg Bhurji","200"],
        // Corrected spelling from 'Scramblled Egg'
        ["Scrambled Egg","150"],["Omelette Sandwich","150"],
        // Corrected spelling/spacing from 'OmeletteCheese'
        ["Omelette Cheese Sandwich","170"],["Paneer Bhurji","200"]
      ],
      breadsSpreads: [
        ["Bun Maska","80"],["Bun Maska Jam","100"],["Bread Butter","80"],["Bread Butter Jam","100"],["Bread Butter Cheese Jam","120"]
      ],
      // Re-organized snacks data from PDF
      snacks: {
          bites: [
            ["Vada Pav","30"],["Poha","80"],["Upma","80"],["Sabudana Khichadi","180"],
            ["Sabudana Vada","180"],["Misal Pav","140"]
          ],
          maggie: [
            ["Maggie","100"],["Masala Maggie","120"],["Cheese Masala Maggie","150"],
            // Corrected spelling from 'Egg Malasa'
            ["Egg Masala Maggie","170"],["Egg Masala Cheese Maggie","180"]
          ],
          pakoda: [
            ["Kanda (Onion) Bhajjia","150"],["Allo Bhajjia","150"],["Paneer Pakoda","180"],["Garlic Toast","150"]
          ]
      },
      southIndian: [
        ["Medu Wada","80"],["Steam Idli","80"],
        // Corrected spelling from 'Idili'
        ["Idli & Wada (2 Idli & 1 Wada)","120"],["Plain Dosa","120"],
        ["Masala Dosa","140"],["Ghee/Butter Sada Dosa","140"],
        // Corrected spelling from 'Malasa'
        ["Ghee/Butter Masala Dosa","160"],
        // Added missing items from PDF
        ["Plain Cheese Dosa","140"],["Masala Cheese Dosa","160"],["Onion Uttappa","160"],
        ["Onion Cheese Uttappa","180"],["Tomato Uttappa","160"],["Tomato Cheese Uttappa","180"],
        ["Onion Tomato Uttappa","200"],["Onion Tomato Cheese Uttappa","220"],["Plain Rawa Dosa","150"],
        ["Plain Ghee Rawa Dosa","170"],["Rawa Masala Dosa","190"],["Rawa Ghee Masala Dosa","210"],
        ["Rawa Onion Dosa","170"],["Rawa Onion Ghee Dosa","180"],
        ["Mysore Sada Dosa","130"],["Mysore Masala Dosa","150"],["Mysore Masala Cheese Dosa","170"]
      ],
      parathas: [
        ["Aloo Paratha","180"],["Gobi Paratha","180"],["Aloo Cheese Paratha","210"],
        ["Mix Vegetable Paratha","180"],["Paneer Paratha","210"],["Cheese Paratha","210"]
      ],
      sandwiches: [
        ["Veg Sandwich","150"],["Veg Cheese Sandwich","180"],
        // Added missing items from PDF
        ["Veg Paneer Sandwich","200"],["Veg Paneer Cheese Sandwich","220"],
        ["Paneer Tikka Sandwich","200"],
        // Added missing items from PDF
        ["Paneer Tikka Cheese Sandwich","220"],["Corn Sandwich","180"],["Corn Cheese Sandwich","200"],
        ["Chicken Mayo Sandwich","220"],["Chicken Cheese Mayo Sandwich","250"],
        // Added missing items from PDF
        ["Chicken Barbeque Sandwich","220"],["Chicken Barbeque Cheese Sandwich","250"],
        ["Chicken Tikka Sandwich","220"],["Chicken Tikka Cheese Sandwich","250"],
        ["Vegetable Club Sandwich","180"],["Vegetable Club Cheese Sandwich","220"],
        ["Chicken Club Sandwich","280"],["Chicken Club Cheese Sandwich","300"],
        ["Nutella Sandwich","150"],
        // Added missing item from PDF
        ["Nutella Cheeese Sandwich","170"]
      ],
      pastaFries: [
        ["French Fries Salted","120"],["Peri Peri Fries","140"],["Masala Fries","140"],
        ["Cheese Fries","160"],
        // Modified Pasta items to reflect Veg/Chicken structure from PDF
        ["Penne Alfredo Pasta (Veg / Chicken)","200/240"],
        ["Penne Arrabiata Pasta (Veg / Chicken)","200/240"],
        ["Aglio Olio Spaghetti Pasta (Veg / Chicken)","200/240"]
      ],
      pavBhaji: [
        ["Amul Pav Bhaji","140"],["Cheese Pav Bhaji","170"],["Paneer Pav Bhaji","170"],["Paneer Cheese Pav Bhaji","190"],
        // Added missing items from PDF
        ["Masala Pav (double)","140"],["Extra Pav (Single Pav)","20"],["Extra Pav (Double Pav)","40"]
      ],
      pizza: [
        // Corrected spelling from 'Margherita'
        ["Margherita Pizza","185"],["Farmland Pizza","200"],["Corn & Cheese Pizza","200"],
        ["Paneer Tandoori Pizza","240"],
        // Added missing items from PDF
        ["Indo-Italian Pizza","240"],
        ["Chicken Barbecue Pizza","280"],
        // Split item from PDF for better searchability
        ["Chicken Tikka Pizza","280"],
        ["Chicken Peri Peri Pizza","280"],
        ["Double Chicken Pizza (With Tikka & Peri Peri)","320"]
      ],
      mains: [
        ["Mutter Paneer","300"],["Paneer Masala","280"],["Paneer Bhurji","300"],
        // Added missing items from PDF
        ["Mushroom Masala","280"],["Aloo Mutter","250"],["Green Peas Masala","250"],
        ["Sev Bhaji","250"],["Chana Masala","250"],["Chana Paneer Masala","280"],
        ["Veg Kolhapuri","250"],
        ["Dal Fry","200"],["Dal Tadka","220"],
        // Detailed Thali items from PDF for clarity
        ["Thali (Dal Fry, Gravy Vegetable, Dry Vegetable, 2 Laccha Paratha, Steam Rice, Roasted Papad)","330"],
        ["Special Thali (Dal Tadka, Paneer Gravy, Dry Vegetable, 2 Laccha Paratha, Tawa Pulav, Roasted Papad & Sweet)","380"]
      ],
      riceMeals: [
        // Corrected spelling from 'Tardka'
        ["Jeera Rice With Dal Tadka","180"],["Dal Khichadi","220"],["Veg Pulav","200"],["Tawa Pulav","220"],
        // Added missing items from PDF
        ["Paneer Pulav","260"],["Egg Pulav","180"],["Mushroom Tawa Pulav","260"],
        ["Steam Rice","120"],["Jeera Rice","150"]
      ],
      chineseVeg: [
        ["Paneer Chilly","220"],
        // Added missing items from PDF
        ["Paneer 65","220"],["Paneer Crispy","220"],
        ["Gobi Manchurian","200"],["Veg Crispy","200"],
        ["Veg 65 Dry","200"],["Mushroom Chilli","225"],
        ["Veg Manchurian Dry","185"],["Veg Manchurian Gravy","220"]
      ],
      chineseNonVeg: [
        ["Chicken Chilly","240"],["Chicken 65","240"],
        // Split item from PDF for better representation
        ["Chicken Lolipop (6 Pcs)","250"],["Chicken Lolipop In Schezwan Sauce","280"],
        ["Chicken Crispy","240"],["Chicken Manchurian Dry","245"],["Chicken Manchurian Gravy","260"]
      ],
      friedRiceVeg: [
        ["Veg Fried Rice","185"],
        // Added missing items from PDF
        ["Mushroom Fried Rice","200"],["Veg Schezwan Fried Rice","200"],
        ["Veg Manchurian Fried Rice","225"],["Veg Tripple Schezwan Fried Rice","250"],
        ["Veg Hakka Noodles","185"],["Veg Schezwan Hakka Noodles","200"]
      ],
      friedRiceNonVeg: [
        ["Chicken Fried Rice","240"],
        // Added missing items from PDF
        ["Chicken Egg Fried Rice","245"],["Chicken Schezwan Fried Rice","245"],
        ["Chicken Triple Schezwan Fried Rice","285"],["Chicken Manchurian Fried Rice","285"],
        ["Chicken Hakka Noodle","240"],["Chicken Schezwan Hakka Noodle","245"],
        ["Chicken Manchurian Hakka Noodle","275"]
      ],
      extras: [
        ["* Cheese","30"],["* Butter","25"],["* Paratha","40"],["Mineral Water","20"]
      ]
    };

    /***** Utility: format price *****/
    function formatPrice(raw){
      raw = String(raw).trim();
      if(!raw) return "";
      // If contains slash, keep both parts and add â‚¹ to each number
      if(raw.includes('/')){
        return raw.split('/').map(p => (p.trim().startsWith('â‚¹') ? p.trim() : 'â‚¹' + p.trim())).join(' / ');
      }
      return raw.startsWith('â‚¹') ? raw : 'â‚¹' + raw;
    }

    /***** Escape helper to avoid injection (safe rendering) *****/
    function escapeHtml(str){
      return String(str)
        .replaceAll('&','&amp;')
        .replaceAll('<','&lt;')
        .replaceAll('>','&gt;')
        .replaceAll('"','&quot;')
        .replaceAll("'",'&#039;');
    }

    /***** Render function for a section *****/
    function renderMenu(sectionId, list){
      const el = document.getElementById(sectionId);
      if(!el) return;

      // Handle the new structure for snacks
      if (sectionId === 'snacks-list' || sectionId === 'maggie-list' || sectionId === 'pakoda-list') {
          list = list || []; // Use the list passed for individual sub-sections
      }

      // create HTML for each item
      const html = list.map(([name, price]) => {
        const p = formatPrice(price);
        return `<div class="menu-item-row" role="listitem">
                  <div class="flex flex-col">
                    <span class="menu-item-name">${escapeHtml(name)}</span>
                  </div>
                  <div class="price-badge">${escapeHtml(p)}</div>
                </div>`;
      }).join('');
      el.innerHTML = html;
    }

    /***** Bulk render on load *****/
    function renderAll(){
      renderMenu('beverages-list', menuData.beverages);
      renderMenu('shakes-list', menuData.thickShakes);
      renderMenu('cafe-special-list', menuData.cafeDurgaSpecial);
      renderMenu('breads-spreads-list', menuData.breadsSpreads);
      
      // Handle the new split snacks sections
      renderMenu('snacks-list', menuData.snacks.bites);
      renderMenu('maggie-list', menuData.snacks.maggie);
      renderMenu('pakoda-list', menuData.snacks.pakoda);

      renderMenu('south-indian-list', menuData.southIndian);
      renderMenu('parathas-list', menuData.parathas);
      renderMenu('sandwiches-list', menuData.sandwiches);
      renderMenu('pasta-fries-list', menuData.pastaFries);
      renderMenu('pav-bhaji-list', menuData.pavBhaji);
      renderMenu('pizza-list', menuData.pizza);
      renderMenu('main-course-list', menuData.mains);
      renderMenu('rice-meals-list', menuData.riceMeals);
      renderMenu('chinese-veg-list', menuData.chineseVeg);
      renderMenu('chinese-non-veg-list', menuData.chineseNonVeg);
      renderMenu('fried-rice-veg-list', menuData.friedRiceVeg);
      renderMenu('fried-rice-non-veg-list', menuData.friedRiceNonVeg);
      renderMenu('extras-list', menuData.extras);
    }

    /***** Search functionality (client-side) *****/
    const searchInput = document.getElementById('menuSearch');
    const clearBtn = document.getElementById('clearSearch');

    function filterMenu(query){
      query = (query || "").trim().toLowerCase();
      // If empty, render all normally
      if(!query){
        renderAll();
        clearBtn.classList.add('hidden');
        return;
      }
      clearBtn.classList.remove('hidden');

      // Helper to search across all arrays, including nested snacks
      const filtered = {};

      Object.keys(menuData).forEach(k => {
          if (k === 'snacks') {
              // Handle nested snack arrays
              filtered.snacks = {};
              Object.keys(menuData.snacks).forEach(subK => {
                  filtered.snacks[subK] = menuData.snacks[subK].filter(([name]) => name.toLowerCase().includes(query));
              });
          } else {
              // Handle flat arrays
              filtered[k] = menuData[k].filter(([name]) => name.toLowerCase().includes(query));
          }
      });

      // Render using filtered lists (show "No items" if empty)
      const renderMap = {
          beverages: 'beverages-list',
          thickShakes: 'shakes-list',
          cafeDurgaSpecial: 'cafe-special-list',
          breadsSpreads: 'breads-spreads-list',
          southIndian: 'south-indian-list',
          parathas: 'parathas-list',
          sandwiches: 'sandwiches-list',
          pastaFries: 'pasta-fries-list',
          pavBhaji: 'pav-bhaji-list',
          pizza: 'pizza-list',
          mains: 'main-course-list',
          riceMeals: 'rice-meals-list',
          chineseVeg: 'chinese-veg-list',
          chineseNonVeg: 'chinese-non-veg-list',
          friedRiceVeg: 'fried-rice-veg-list',
          friedRiceNonVeg: 'fried-rice-non-veg-list',
          extras: 'extras-list'
      };

      Object.keys(renderMap).forEach(key => {
        const containerId = renderMap[key];
        const container = document.getElementById(containerId);
        if(!container) return;
        const list = filtered[key];

        if(list && list.length){
          container.innerHTML = list.map(([name, price]) => {
            return `<div class="menu-item-row"><span class="menu-item-name">${escapeHtml(name)}</span><span class="price-badge">${escapeHtml(formatPrice(price))}</span></div>`;
          }).join('');
        } else {
          container.innerHTML = `<p class="text-sm text-gray-500 py-2">No matching items</p>`;
        }
      });
      
      // Special handling for split snacks section
      const snackContainers = {
          'bites': 'snacks-list',
          'maggie': 'maggie-list',
          'pakoda': 'pakoda-list'
      };

      Object.keys(snackContainers).forEach(subK => {
          const container = document.getElementById(snackContainers[subK]);
          if (!container) return;
          const list = filtered.snacks[subK];
          
          if (list && list.length) {
              container.innerHTML = list.map(([name, price]) => {
                  return `<div class="menu-item-row"><span class="menu-item-name">${escapeHtml(name)}</span><span class="price-badge">${escapeHtml(formatPrice(price))}</span></div>`;
              }).join('');
          } else {
              container.innerHTML = `<p class="text-sm text-gray-500 py-2">No matching items</p>`;
          }
      });
    }

    searchInput?.addEventListener('input', e => filterMenu(e.target.value));
    clearBtn?.addEventListener('click', () => { searchInput.value=''; filterMenu(''); clearBtn.classList.add('hidden'); });

    /***** Smooth offset scroll for nav links (compensate header height) *****/
    document.querySelectorAll('a[href^="#"]').forEach(link => {
      link.addEventListener('click', function(e){
        const targetId = this.getAttribute('href');
        const target = document.querySelector(targetId);
        if(!target) return;
        e.preventDefault();
        const headerH = document.querySelector('header').offsetHeight;
        const top = target.getBoundingClientRect().top + window.scrollY - headerH - 20;
        window.scrollTo({ top, behavior:'smooth' });
      });
    });

    /***** Print/download button *****/
    document.getElementById('printMenu')?.addEventListener('click', () => {
      // quick analytics-safe print
      window.print();
    });

    /******************************************
     * FIX: Dynamic Floating Button Visibility
     ******************************************/
    const floatOrderEl = document.getElementById('floatOrder');
    const footerEl = document.getElementById('footer');
    const visibilityThreshold = 100; // Distance in pixels from the bottom of the viewport to the top of the footer

    function checkFloatButtonVisibility() {
        if (!floatOrderEl || !footerEl) return;

        // Calculate the footer position relative to the viewport
        const footerRect = footerEl.getBoundingClientRect();
        
        // If the top of the footer is too close to the bottom of the viewport (or has scrolled past it)
        // hide the floating button to prevent visual overlap.
        if (footerRect.top < window.innerHeight + visibilityThreshold) {
            floatOrderEl.classList.add('hidden-at-bottom');
        } else {
            floatOrderEl.classList.remove('hidden-at-bottom');
        }
    }

    window.addEventListener('scroll', checkFloatButtonVisibility);
    window.addEventListener('resize', checkFloatButtonVisibility);


    /******************************************
     * FIX: JS SLIDER CONTROL (Drag/Loop)
     ******************************************/

    const sliderContainer = document.getElementById('sliderContainer');
    const sliderTrack = document.getElementById('sliderTrack');
    
    let isDragging = false;
    let startX = 0;
    let previousTranslateX = 0;
    let currentTranslateX = 0;
    let animationFrameId = null;
    let autoScrollId = null; // Use a dedicated ID for the auto-scroll interval/timeout
    const scrollSpeed = 0.5; // Pixels per frame (slower scrolling)
    const NUM_ITEMS = 4; // Number of unique items in the original set

    let totalOriginalWidth = 0; // Width of the first set of images

    // Function to set the track position based on the currentTranslateX value
    function setTranslate() {
        // Use Math.round to ensure smooth pixel placement
        sliderTrack.style.transform = `translateX(${Math.round(currentTranslateX)}px)`;
    }

    // Function to get the current translateX value from CSS (safely retrieve float)
    function getTranslateX() {
        const style = window.getComputedStyle(sliderTrack);
        const matrix = style.transform.match(/matrix\((.+)\)/);
        if (matrix) {
            // The translateX value is the 5th element in a 2D transform matrix
            return parseFloat(matrix[1].split(', ')[4]) || 0;
        }
        return 0;
    }

    // Loop correction: snaps the slider back to the start of the duplicated set (Set 2) 
    function applyLoopCorrection() {
        // Only apply correction if totalOriginalWidth is calculated
        if (totalOriginalWidth === 0) return;

        // If the slider has moved past the entire first set of images (negative direction)
        if (currentTranslateX < -totalOriginalWidth) {
            // Jump back one set width (seamless jump)
            currentTranslateX += totalOriginalWidth;
        } 
        // If the slider moves back into the second set (positive direction)
        else if (currentTranslateX > 0) {
            // Jump forward one set width (seamless jump)
            currentTranslateX -= totalOriginalWidth;
        }
    }

    // Automatic continuous scrolling function (now using requestAnimationFrame for smoothness)
    function autoScroll() {
        if (!isDragging && totalOriginalWidth > 0) {
            currentTranslateX -= scrollSpeed;
            applyLoopCorrection();
            setTranslate();
        }
        animationFrameId = requestAnimationFrame(autoScroll);
    }
    
    // Mouse/Touch Event Handlers
    function startDrag(clientX) {
        if (animationFrameId) {
            cancelAnimationFrame(animationFrameId); // Stop auto-scroll
        }
        isDragging = true;
        startX = clientX;
        // Get the current position right before dragging starts
        previousTranslateX = getTranslateX(); 
        sliderContainer.classList.add('grabbing');
    }

    function duringDrag(clientX) {
        if (!isDragging) return;
        const dragDistance = clientX - startX;
        // Apply the drag distance relative to the position when drag started
        currentTranslateX = previousTranslateX + dragDistance;
        
        applyLoopCorrection();
        setTranslate();
    }

    function endDrag() {
        if (!isDragging) return;
        isDragging = false;
        sliderContainer.classList.remove('grabbing');
        // Restart the auto-scroll loop
        animationFrameId = requestAnimationFrame(autoScroll); 
    }

    // Event Listeners for Mouse
    sliderContainer.addEventListener('mousedown', (e) => {
      e.preventDefault(); // Prevent text selection during drag
      startDrag(e.clientX);
    });
    // Attach mousemove/mouseup to the window to handle dragging outside the container
    window.addEventListener('mousemove', (e) => duringDrag(e.clientX));
    window.addEventListener('mouseup', endDrag);

    // Event Listeners for Touch (Mobile/Tablet Swipe)
    sliderContainer.addEventListener('touchstart', (e) => {
        // Prevent default only if two fingers are not used (to allow native scroll)
        if (e.touches.length === 1) {
            e.preventDefault(); 
            startDrag(e.touches[0].clientX);
        }
    }, {passive: false}); // passive: false needed to allow preventDefault

    sliderContainer.addEventListener('touchmove', (e) => {
        if (e.touches.length === 1) {
            duringDrag(e.touches[0].clientX);
        }
    }, {passive: true});

    sliderContainer.addEventListener('touchend', endDrag);
    sliderContainer.addEventListener('touchcancel', endDrag);

    // Initialization logic for width calculation
    function initializeSlider() {
        const items = sliderTrack.querySelectorAll('.gallery-item');
        if (items.length < NUM_ITEMS * 2) {
            console.error("Slider requires at least 8 items (4 unique + 4 duplicates) for seamless loop.");
            return;
        }
        
        // Calculate the width of the entire original image set (4 items + 4 gaps)
        // We calculate the bounding box of the first 'NUM_ITEMS' items.
        
        let width = 0;
        for(let i = 0; i < NUM_ITEMS; i++) {
            const item = items[i];
            const itemRect = item.getBoundingClientRect();
            const style = window.getComputedStyle(item);
            const marginRight = parseFloat(style.marginRight) || 0;
            width += itemRect.width + marginRight;
        }

        // totalOriginalWidth is the distance to scroll one set of images
        totalOriginalWidth = width;
        
        // Set initial position to ensure the first set is visible
        currentTranslateX = 0;
        setTranslate();

        // Start continuous scroll
        if (animationFrameId) {
            cancelAnimationFrame(animationFrameId);
        }
        autoScroll();
    }

    // Re-initialize slider on window resize to ensure correct width calculation
    window.addEventListener('resize', initializeSlider);

    // DOM load event listener
    window.addEventListener('DOMContentLoaded', () => {
      renderAll();
      // simple reveal effect
      document.querySelectorAll('.reveal').forEach((el, i) => el.style.animationDelay = (i*80)+'ms');
      
      // Initial checks
      checkFloatButtonVisibility();
      initializeSlider();
    });

    // small mobile nav toggle (progressive enhancement)
    document.querySelectorAll('.js-open-nav').forEach(btn => {
      btn.addEventListener('click', () => {
        const mobile = document.getElementById('mobile-nav');
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        btn.setAttribute('aria-expanded', String(!expanded));
        if(mobile) mobile.classList.toggle('hidden');
      });
    });
  </script>
</body>
</html>
